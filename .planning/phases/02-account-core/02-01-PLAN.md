# Phase 02-01: Account Search and Routing

## Objective
Create the account search functionality and routing structure that allows users to find and navigate to patient accounts.

## Context
@Lab PA WinForms UI/Forms/PersonSearchForm.Designer.cs
@Lab PA WinForms UI/Forms/AccountForm.Designer.cs
@LabBilling Library/Services/AccountService.cs

## Tasks

### Task 1: Register AccountService in DI
**Type:** modify
**Files:** `LabOutreachUI/Program.cs`
**Action:**
- Register AccountService as scoped service
- Register AccountRepository if not already registered
- Ensure UnitOfWorkMain is available for account operations

**Verify:** AccountService resolves correctly from DI container

### Task 2: Create Account Search Page
**Type:** create
**Files:** `LabOutreachUI/Pages/Billing/AccountSearch.razor`
**Action:**
- Create page at route `/account`
- Add search form with fields: Account #, MRN, Patient Name, DOB
- Use AutocompleteInput for patient name search
- Add search button and clear button
- Display results in DataGrid
- Support keyboard Enter to search

**Verify:** Search returns matching accounts, displays in grid

### Task 3: Create Account Routes
**Type:** create
**Files:** `LabOutreachUI/Pages/Billing/Account.razor`
**Action:**
- Create page at route `/account/{AccountNumber}`
- Load account data on initialization
- Display loading state while fetching
- Handle account not found error
- Redirect to search if no account number

**Verify:** Navigating to /account/12345 loads account 12345

### Task 4: Implement Search Service Methods
**Type:** verify
**Files:** `LabBilling Library/Services/AccountService.cs`
**Action:**
- Verify SearchAccounts method exists or create if needed
- Support search by: account number, MRN, patient name (partial), DOB
- Return list of AccountSearch results (lightweight)
- Limit results to reasonable count (100)

**Verify:** Service method returns search results

### Task 5: Create Account Not Found Page
**Type:** create
**Files:** `LabOutreachUI/Pages/Billing/AccountNotFound.razor`
**Action:**
- Create error page for invalid account numbers
- Display friendly message
- Link back to account search
- Show the attempted account number

**Verify:** Invalid account shows not found page

### Task 6: Add Account Search to Navigation
**Type:** modify
**Files:** `LabOutreachUI/Shared/NavMenu.razor`
**Action:**
- Ensure Account link points to `/account`
- Verify link is in Billing section
- Add appropriate icon

**Verify:** Navigation link works correctly

## Verification
- [ ] Account search finds accounts by various criteria
- [ ] Search results display in grid
- [ ] Clicking result navigates to account
- [ ] Direct URL navigation works
- [ ] Not found handling works

## Success Criteria
- Search matches WinForms search functionality
- Fast search response (<1 second)
- Clean navigation flow
- Proper error handling

## Output
Create `02-01-SUMMARY.md` documenting:
- Pages created
- Search functionality implemented
- Route structure
- Git commit hash
